# MarmoTD - 土撥鼠防禦戰

一款基於 Vanilla JavaScript 的硬派塔防遊戲。抵禦一波又一波的土撥鼠大軍，利用元素相剋、地形優勢與強力技能守護你的家園！

## 🎮 遊戲機制

### 核心玩法
*   **元素相剋**：善用屬性剋制來最大化傷害。
    *   **水** > 火 > 風 > 土 > **水**
    *   **光** <> **暗** (互剋)
    *   **毒** > 土/水 (但被 火/風/光 剋制)
    *   **無** (物理) 為中性
*   **100 波挑戰**：每 5 波遭遇強大 BOSS，後期更有雙屬性敵人。
*   **硬派難度**：沒有暫停（除非使用技能），血量有限，考驗即時反應與決策。

### 🌍 地形系統 (New!)
地圖隨機生成多種地形，特定屬性的防禦塔在對應地形上會獲得強力 Buff：
*   **平原 (Plains)**: 無加成。
*   **火山 (Volcano)**: **火屬性** 傷害 +25%。
*   **深海 (Ocean)**: **水屬性** 射程 +25%。
*   **森林 (Forest)**: **風/土/毒** 攻速 +15%。
*   **墓地 (Graveyard)**: **暗屬性** 傷害 +25%。
*   **聖地 (Holyland)**: **光屬性** 攻速 +20%。
*   **荒地 (Wasteland)**: **無屬性** 傷害 +15%。

### 🎲 隨機事件
每波開始時有機率觸發隨機事件，影響戰局：
*   **無事發生**: 風平浪靜。
*   **怪物復甦**: 敵人血量全滿。
*   **血量倍增**: 本波敵人血量翻倍。
*   **急速行軍**: 敵人移動速度大幅提升。
*   **建築腐蝕**: 所有防禦塔血量減半。
*   **天降橫財**: 獲得大量金幣。
*   **虛空吞噬**: 隨機摧毀一座防禦塔。
*   **元素突變**: 敵人屬性隨機改變。
*   **狂暴怒火**: 敵人對塔的傷害倍增。
*   **酸雨腐蝕**: 全場減速，防禦塔持續受到酸雨傷害。

### 🐹 土撥鼠圖鑑 (敵人)
*   **普通土撥鼠**: 屬性多變，成群結隊。
*   **BOSS 土撥鼠**: 每 5 波出現，體型巨大，血量極高。
    *   **技能**: 召喚小兵、死後沉默防禦塔、免疫部分控場。
*   **分裂土撥鼠**: 死後有機率分裂成更小的土撥鼠。
*   **復活土撥鼠**: 死後有機率原地復活，血量加倍。

---

## 🏰 防禦塔與技能

遊戲包含 37 種獨特防禦塔，分為 3 個階級 (Tier)。

### 通用技能 (Tier 1 & 2)
所有基礎塔皆擁有對應屬性的特殊能力：
*   **治療 (Heal)**: 無屬性 (Medic) - 定期治療周圍防禦塔。
*   **連鎖 (Chain)**: 光屬性 - 攻擊在敵人問彈跳 (最多 3 次)。
*   **斬殺 (Execute)**: 暗屬性 - 對低血量敵人造成額外傷害。
*   **緩速 (Slow)**: 水屬性 - 攻擊附帶緩速效果。
*   **暴擊 (Crit)**: 火屬性 - 攻擊有機率造成雙倍傷害。
*   **擊退 (Knockback)**: 風屬性 - 有機率擊退非 BOSS 敵人。
*   **煉金 (Gold)**: 土屬性 - 定期生產金幣。
*   **中毒 (Poison)**: 毒屬性 - 攻擊附帶持續傷害。
*   **擊暈 (Bash)**: 無屬性 (Tier 3) - 有機率短暫暈眩敵人。

### 特殊傳奇塔 (Tier 3)
*   **狙擊精英 (Sniper)**: 超遠射程，單體高傷，主動技能：**核彈**。
*   **狂暴機槍 (Rapid)**: 極高攻速，低單發傷害。
*   **大砲塔 (Cannon)**: 範圍 (AOE) 物理傷害。
*   **黑洞塔 (BlackHole)**: 暗屬性，極高範圍傷害。
*   **隨機塔 (Random)**: 每 5 秒隨機變身為其他塔，並重置狀態。
*   **輔助攻速塔 (Support)**: 增加周圍隊友攻速。
*   **狂暴塔 (Berserk)**: 火屬性，極高傷害但會獻祭 (扣除) 周圍隊友血量。
*   **流星塔 (Meteor)**: 光屬性，範圍傷害並隨機獲得金幣。
*   **冰封塔 (Freeze)**: 水屬性，強力凍結敵人 (BOSS 免疫)。
*   **貪婪塔 (Greed)**: 傷害取決於當前持有金幣量 (0.4% + 0.1%/級)。
*   **藤蔓塔 (Root)**: 毒屬性，攻擊可短暫定身 BOSS。
*   **戰鼓塔 (Drum)**: 增加周圍防禦塔傷害。
*   **刀塔 (Blade)**: 極短射程，超高單體傷害，對 BOSS 傷害 x3。
*   **鷹眼塔 (Hawk)**: 增加周圍防禦塔暴擊率。
*   **星辰塔 (Star)**: 全圖攻擊，有機率破壞場上的食物。
*   **路障塔 (Barricade)**: 建造在路徑上，阻擋並傷害敵人。
*   **毒藥塔 (PoisonFactory)**: 定期在地圖上生成毒藥食物。
*   **時空塔 (Time)**: 暗屬性，有機率將敵人傳送回起點方向。
*   **商人塔 (Merchant)**: 攻擊會幫敵人補血 (x0.5)，但獲得雙倍擊殺金幣 (x2)。

---

## ⚡ 玩家技能 (Skill Points)
每波過關獲得技能點 (SP)，可用於強化全局能力：

### 被動技能
*   **攻擊強化**: 提升全塔傷害。
*   **攻速強化**: 提升全塔攻速。
*   **賞金獵人**: 擊殺金幣獎勵 +10%。
*   **建築學**: 防禦塔血量 +20%。

### 主動技能
*   **時間暫停**: 暫停所有敵人 3~5 秒。
*   **天地變異**: 隨機將場上 30% 的塔變身為其他類型。
*   **緊急修復**: 立刻修復所有防禦塔至滿血。
*   **天降甘霖**: 立即獲得大量金幣。
*   **元素超載**: 5 秒內所有塔傷害翻倍。
*   **守護天使**: 主堡 (生命值) 無敵 10 秒。

---

## 🛠️ 開發與操作
*   **開始**: 打開 `index.html` 即可遊玩。
*   **操作**: 滑鼠點擊建造/選擇，點擊敵人可造成微量物理傷害 (Tap Damage)。
*   **快捷鍵**: 無，純滑鼠操作。
*   **存檔**: 暫無存檔功能，F5 重整即重置。

---
*Created by Weber Chang & Antigravity*
